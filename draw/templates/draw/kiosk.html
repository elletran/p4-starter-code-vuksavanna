{% load static %}
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>P4 Drawing</title>
  <link rel="stylesheet" type="text/css" href="{% static 'draw/vendor/bootstrap/css/bootstrap.min.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'draw/styles.css' %}" />
  <script type="text/javascript" src="{% static 'draw/vendor/jquery/jquery-3.3.1.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'draw/vendor/paper/paper-full.min.js' %}"></script>
  <script src="https://cdn.socket.io/socket.io-1.0.0.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&family=Playfair+Display:ital,wght@0,500;0,600;0,700;1,600&display=swap" rel="stylesheet">

  <style type="text/css">
  </style>
</head>
<body>
    <div>
        <svg xmlns="http://www.w3.org/2000/svg" style = "position: absolute; top: 15px; left: 40px; margin-top: 15px; border: 1px solid black; padding: 8px; width: 45px; height: 45px;"  fill="currentColor" class="bi bi-palette" viewBox="0 0 16 16">
            <path d="M8 5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm4 3a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zM5.5 7a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm.5 6a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"/>
            <path d="M16 8c0 3.15-1.866 2.585-3.567 2.07C11.42 9.763 10.465 9.473 10 10c-.603.683-.475 1.819-.351 2.92C9.826 14.495 9.996 16 8 16a8 8 0 1 1 8-8zm-8 7c.611 0 .654-.171.655-.176.078-.146.124-.464.07-1.119-.014-.168-.037-.37-.061-.591-.052-.464-.112-1.005-.118-1.462-.01-.707.083-1.61.704-2.314.369-.417.845-.578 1.272-.618.404-.038.812.026 1.16.104.343.077.702.186 1.025.284l.028.008c.346.105.658.199.953.266.653.148.904.083.991.024C14.717 9.38 15 9.161 15 8a7 7 0 1 0-7 7z"/>
          </svg>
    </div>
    <div class = "flexcenter" style = "width: 500px; height: 500px;"> 
        <img style = "margin-top: 5px" class = "col-12" src= "{% static 'draw/images/monstera.png' %}">
    </div>
    <div class = "row text-center">
        <div class = "col-12 text" style = "margin-top: 20px; color: #2f3d2e; font-size: 70px; font-weight: 600;">BRAIN BROKE</div>
    </div>
    <div class = "row text-center">
        <div class = "col-12 text" style = "margin-top: 2px; color: #396935; font-size: 30px; font-weight: 500;">SAVANNA AND ELLE'S PLANT</div>
    </div>
  <!-- You may change the dimensions of this canvas -->
  <!-- <canvas id="myCanvas" width="750px" height="750px"></canvas> -->
</body>
<script>
   var canvas = document.getElementById('myCanvas');
   paper.setup(canvas);
   var tool = new paper.Tool();
   var path = new paper.Path();
   var uid = Date.now() % 10000;
 
   // vaar clients = [];
   var tabs = new Map(); 
   var sizeLarge = true;

   // getting the URL (you may want to use for Exercise 3)
   var url = window.location.href;
   if (window.location.href.includes("size=small")) {
       sizeLarge = false;
   }
  var socket = new WebSocket(
      'ws://' + window.location.host + '/ws/draw');

  //Citation (reference): https://stackoverflow.com/questions/1484506/random-color-generator
   function getRandomColor(tabid) {
    var letters = '0123456789ABCDEF';
           var hashcolor = '#';
           for (var i = 0; i < 6; i++) {
               hashcolor += letters[Math.floor(tabid/10000 * 16)];
           }
           return hashcolor;
   }
 
 
//   tool.onMouseMove = function(event) { //http://paperjs.org/reference/tool/ path examples
//       path.strokeColor = getRandomColor(uid); 
//       path.add(event.point);
      
    
//       socket.send("{\"x\" : " + event.point.x + ", \"y\" : " + event.point.y + ", \"uid\" : " + uid + "}" );
//    }
 

//    socket.onmessage = function(receivedMessage) {
//        var received = JSON.parse(receivedMessage.data);

//        if (sizeLarge) {
//            if (!tabs.has(received.uid)) {
//                var remotePath = new paper.Path();
//                tabs.set(received.uid, remotePath);
//            }
           
//            tabs.get(received.uid).strokeColor = getRandomColor(received.uid);
//            tabs.get(received.uid).add(new paper.Point(received.x, received.y));
//        }
//    }
 
    
   socket.onclose = function(e) {
      console.error('Chat socket closed unexpectedly');
  };
</script>
</html>
 
 

